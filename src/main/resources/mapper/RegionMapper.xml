<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd">

<mapper namespace="dev.hwiveloper.naranim.mapper.RegionMapper">
	<select id="getRegions" parameterType="Map" resultType="Map">
		SELECT
			  DISTINCT sd_name AS sdName
			<if test="sdName != null and sdName != ''">
			, gusigun_name AS gusigunName
			</if>
			<if test="gusigunName != null and gusigunName != ''">
			, emd_name AS emdName
			</if>
			<if test="emdName != null and emdName != ''">
			, sgg_name AS sggName
			</if>
			, sg_id AS sgId
			, sg_type_code AS sgTypeCode
		FROM region
		WHERE 1=1
		<if test="sdName != null and sdName != ''">
		AND sd_name = #{sdName}
		</if>
		<if test="gusigunName != null and gusigunName != ''">
		AND gusigun_name = #{gusigunName}
		</if>
		<if test="emdName != null and emdName != ''">
		AND emd_name = #{emdName}
		</if>
		AND sg_id = '20200415'
		AND sg_type_code = '2'
		ORDER BY sd_name, gusigun_name, emd_name
	</select>
	
	<select id="getMyRegionCandidates" parameterType="Map" resultType="Map">
		SELECT
			hubo_id AS huboId,
			name,
			DATE_FORMAT(STR_TO_DATE(birthday, '%Y%m%d'), '%Y.%m.%d') AS birthday,
			jd_name as jdName,
			<if test='pre != null and pre == "Y"'>
			image,
			</if>
			hanja_name AS hanjaName
		<if test='pre == null or pre == "N"'>
		FROM candidate c
		</if>
		<if test='pre != null and pre == "Y"'>
		FROM pre_candidate c
		</if>
		WHERE 1=1
		<if test='pre != null and pre == "Y"'>
		AND sg_id = '20200415'
		AND sg_type_code = '2'
		AND sgg_name = #{sggName}
		</if>
	</select>
</mapper>